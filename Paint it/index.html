<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Paint it</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Playfair+Display:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        font-family: "Montserrat", sans-serif;
        /* background: #0b0b0b; */
        color: #fff;
        overflow: hidden;
        cursor: none;
        position: relative;
      }

      /* Dim the outside area so the framed image stands out */
      .outer-dim {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.55);
        pointer-events: none;
        z-index: 1;
      }

      /* The centered frame that contains the background images and particles */
      .frame {
        width: 82vw;
        max-width: 1200px;
        height: 70vh;
        max-height: 820px;
        position: relative;
        z-index: 2; /* above outer-dim */
        border: 4px solid rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.75),
          inset 0 0 60px rgba(0, 0, 0, 0.3);
        background: #000; /* fallback */
      }

      /* Adjust backgrounds to be inside the frame (not full-page) */
      .background-bw,
      .background-color {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        border-radius: 6px;
      }

      .background-bw {
        z-index: 0;
        filter: grayscale(100%);
        transform-origin: center;
      }

      .background-color {
        z-index: 1;
        mask: url(#particleMask);
        -webkit-mask: url(#particleMask);
        transform-origin: center;
      }

      /* Text overlay for readability */
      .text-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.25);
        z-index: 4;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .text-overlay.visible {
        opacity: 1;
      }

      .s-hero {
        position: absolute;
        top: 2rem;
        left: 2rem;
        z-index: 20;
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .s-hero.visible {
        opacity: 1;
      }

      .s__title {
        font-family: "Playfair Display", serif;
        font-size: 1.5rem;
        line-height: 1.3;
        margin-bottom: 1rem;
        font-weight: 400;
        letter-spacing: 1px;
      }

      .s__catcher {
        position: fixed;
        bottom: 2rem;
        left: 50%;
        transform: translateX(-50%);
        font-size: 4rem;
        font-family: "Momo Signature", cursive;
        color: #ffffff;
        letter-spacing: 2px;
        text-transform: uppercase;
        font-weight: 700;
        z-index: 20;
      }

      .s__author {
        position: fixed;
        top: 1rem;
        transform: none;
        font-size: 1.1rem;
        font-family: "Momo Signature", cursive;
        color: #ffffff;
        letter-spacing: 1px;
        text-transform: uppercase;
        font-weight: 700;
        z-index: 200; /* ensure it's above other UI */
        pointer-events: none; /* avoid interfering with clicks */
      }

      /* AG logo button positioned top-left */
      .btn--tl {
        position: fixed;
        top: 0.8rem;
        left: 0.8rem;
        z-index: 220;
        width: 3.2rem;
        height: 3.2rem;
        padding: 0;
        border: none;
        background: transparent;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border-radius: 6px;
      }

      .btn--tl .logo-svg {
        width: 2.6rem;
        height: 2.6rem;
        fill: #ffffff;
        transition: transform 0.25s ease, filter 0.25s ease;
        pointer-events: none; /* link is on the anchor */
      }

      .btn--tl:hover .logo-svg {
        transform: scale(1.08);
        filter: drop-shadow(0 6px 12px rgba(255, 255, 255, 0.08));
      }

      .s-scene {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 20;
        width: 90%;
        max-width: 1200px;
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .s-scene.visible {
        opacity: 1;
      }

      .s__title__line {
        font-family: "Montserrat", sans-serif;
        font-size: 5rem;
        font-weight: 900;
        line-height: 1.1;
        margin-bottom: 1rem;
        text-transform: uppercase;
        letter-spacing: -1px;
        background: linear-gradient(45deg, #ffffff, #a5b4fc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .s__word {
        display: flex;
        justify-content: center;
        margin-top: 3rem;
        --max-scale: 1;
      }

      .s__word__char {
        font-family: "Montserrat", sans-serif;
        font-size: 10rem;
        font-weight: 900;
        margin: 0 1rem;
        transform: scale(var(--max-scale));
        transition: transform 0.3s ease;
        background: linear-gradient(45deg, #ff6b6b, #ffa500);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      }

      .cursor {
        position: fixed;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.9);
        pointer-events: none;
        z-index: 100;
        transform: translate(-50%, -50%);
        mix-blend-mode: difference;
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.7);
        transition: width 0.2s, height 0.2s;
      }

      .cursor.hover {
        width: 40px;
        height: 40px;
        background: rgba(255, 107, 107, 0.8);
      }

      /* Keep cursor and other UI elements on top of the page */
      .cursor {
        position: fixed;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.9);
        pointer-events: none;
        z-index: 100;
        transform: translate(-50%, -50%);
        mix-blend-mode: difference;
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.7);
        transition: width 0.2s, height 0.2s;
      }

      .cursor.hover {
        width: 40px;
        height: 40px;
        background: rgba(255, 107, 107, 0.8);
      }

      /* SVG drawing animation */
      @keyframes drawLogo {
        0% {
          stroke-dashoffset: 1000;
          fill: transparent;
          stroke: #ffffff;
        }
        50% {
          stroke-dashoffset: 0;
          fill: transparent;
          stroke: #f0f0f0;
        }
        80% {
          fill: rgba(255, 255, 255, 0.3);
          stroke: #f0f0f0;
        }
        100% {
          stroke-dashoffset: 0;
          fill: #ffffff;
          stroke: transparent;
        }
      }

      /* Ink drip effect */
      .logo-svg::before {
        content: "";
        position: absolute;
        top: -5px;
        left: -5px;
        right: -5px;
        bottom: -5px;
        background: radial-gradient(
            circle at 30% 20%,
            rgba(255, 255, 255, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 70% 80%,
            rgba(255, 255, 255, 0.05) 0%,
            transparent 50%
          );
        border-radius: 50%;
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
      }

      .btn--tl:hover .logo-svg::before {
        opacity: 1;
        animation: inkDrip 0.5s ease-out 1.5s;
      }

      @keyframes inkDrip {
        0% {
          transform: scale(0.8);
          opacity: 0.5;
        }
        50% {
          transform: scale(1.1);
          opacity: 0.3;
        }
        100% {
          transform: scale(1);
          opacity: 0.1;
        }
      }

      .btn--tl:active {
        transform: scale(0.95) translateZ(0);
        transition: all 0.15s cubic-bezier(0.215, 0.61, 0.355, 1);
      }

      .btn--tl a {
        text-decoration: none;
        color: inherit;
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: all;
        position: relative;
        z-index: 21;
        cursor: pointer;
        background: none;
        transition: inherit;
        width: 100%;
        height: 100%;
      }

      /* Remove any box shadows or backgrounds */
      .btn--tl,
      .btn--tl:focus,
      .btn--tl:active {
        background: transparent !important;
        box-shadow: none !important;
        outline: none !important;
      }

      /* Image URL Input Box Styles */
      .image-url-container {
        position: fixed;
        bottom: 2rem;
        left: 50%;
        transform: translateX(-50%);
        z-index: 100;
        width: 80%;
        max-width: 600px;
        text-align: center;
      }

      .image-url-input {
        width: 100%;
        padding: 12px 20px;
        font-size: 16px;
        background: rgba(0, 0, 0, 0.8);
        border: 2px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        color: white;
        font-family: "Montserrat", sans-serif;
        transition: all 0.3s ease;
      }

      .image-url-input:focus {
        outline: none;
        border-color: rgba(255, 255, 255, 0.5);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
      }

      .image-url-input::placeholder {
        color: rgba(255, 255, 255, 0.5);
      }

      @media (max-width: 768px) {
        .s__author {
          top: 0.8rem;
          left: 4.2rem; /* keep some gap on smaller screens */
          font-size: 1rem;
        }
        .btn--tl {
          top: 0.6rem;
          left: 0.6rem;
          width: 2.8rem;
          height: 2.8rem;
        }
        .btn--tl .logo-svg {
          width: 2.2rem;
          height: 2.2rem;
        }
      }

      @media (max-width: 480px) {
        .s__author {
          top: 0.6rem;
          left: 3.8rem;
          font-size: 0.95rem;
        }
        .btn--tl {
          top: 0.5rem;
          left: 0.5rem;
          width: 2.4rem;
          height: 2.4rem;
        }
        .btn--tl .logo-svg {
          width: 1.9rem;
          height: 1.9rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Dim outside the frame -->
    <div class="outer-dim"></div>

    <!-- Centered framed box for backgrounds + particles -->
    <div class="frame">
      <!-- Black and white background (now constrained to frame) -->
      <div
        class="background-bw"
        style="
          background-image: url('https://images.unsplash.com/photo-1548697143-6a9dc9d9d80f?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1176');
        "
      ></div>

      <!-- Color background that gets revealed by particles (constrained) -->
      <div
        class="background-color"
        style="
          background-image: url('https://images.unsplash.com/photo-1741851374540-c64860d3bcb7?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1170');
        "
      ></div>

      <!-- Text overlay inside the frame -->
      <div class="text-overlay" id="textOverlay"></div>

      <!-- Main SVG for particles and mask (moved inside the frame) -->
      <svg
        class="s-svg js-svg"
        xmlns="http://www.w3.org/2000/svg"
        preserveAspectRatio="none"
      >
        <defs>
          <!-- Gooey filter for particles -->
          <filter id="gooey">
            <feGaussianBlur in="SourceGraphic" stdDeviation="25" />
            <feColorMatrix
              type="matrix"
              values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 30 -7"
              result="goo"
            />
          </filter>

          <!-- Mask that will be created by particles -->
          <mask id="particleMask">
            <g filter="url(#gooey)" class="js-particles-wrapper"></g>
          </mask>
        </defs>

        <!-- Visible particles -->
        <g filter="url(#gooey)" class="js-particles-wrapper"></g>
      </svg>
    </div>

    <div class="background-decoration">
      <div class="decoration-circle circle-1"></div>
      <div class="decoration-circle circle-2"></div>
      <div class="decoration-circle circle-3"></div>
    </div>

    <div class="hover-zones">
      <div class="zone zone-top-left"></div>
      <div class="zone zone-top-right"></div>
      <div class="zone zone-center"></div>
    </div>

    <div class="s__burger">
      <div class="s__burger__line"></div>
      <div class="s__burger__line"></div>
      <div class="s__burger__line"></div>
    </div>

    <div class="s__author">Made By Aish2004Gupta</div>
    <!-- <div class="s__catcher">Underneath It All</div> -->

    <!-- AG logo button (already points to X) -->
    <button class="btn btn--tl" aria-label="Follow on X">
      <a
        href="https://twitter.com/intent/follow?screen_name=aish2004gupta"
        target="_blank"
        rel="noopener noreferrer"
      >
        <div class="logo-svg-wrapper">
          <svg
            class="logo-svg"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0.5833333730697632 21 69.01666259765625 37.29999923706055"
          >
            <path
              class="logo-path"
              d="M5.35 58.00Q2 57.50 1 54.92Q0 52.35 1.40 48.40L8 29.65Q8.90 27.05 10.07 25.20Q11.25 23.35 13.03 22.35Q14.80 21.35 17.45 21.35Q21.45 21.35 23.48 23.55Q25.50 25.75 26.85 29.65L33.40 48.40Q34.80 52.35 33.93 54.92Q33.05 57.50 29.65 58.00Q26.90 58.35 24.88 57.35Q22.85 56.35 22.45 54.10Q22.15 52.60 22.38 51.60Q22.60 50.60 22.80 50.00Q22.95 49.50 22.82 49.02Q22.70 48.55 22.05 48.55L12.75 48.55Q12.10 48.55 11.97 49.02Q11.85 49.50 12.05 50.00Q12.25 50.60 12.45 51.60Q12.65 52.60 12.40 54.10Q12 56.35 10.05 57.35Q8.10 58.35 5.35 58.00M21.10 41.55L18.50 33.40Q18.40 32.90 18.18 32.62Q17.95 32.35 17.45 32.35Q16.95 32.35 16.73 32.62Q16.50 32.90 16.35 33.40L13.80 41.55L21.10 41.55ZM49.45 58.30Q45.45 58.30 42.50 55.97Q39.55 53.65 37.95 49.57Q36.35 45.50 36.35 40.35Q36.35 35.55 37.78 31.92Q39.20 28.30 41.68 25.87Q44.15 23.45 47.43 22.22Q50.70 21.00 54.35 21.00Q61.05 21.00 64.28 22.87Q67.50 24.75 67.50 27.70Q67.50 30.00 66.33 31.75Q65.15 33.50 62.80 33.50Q61.20 33.50 59.78 33.20Q58.35 32.90 56.88 32.62Q55.40 32.35 53.60 32.35Q49.65 32.35 47.93 34.60Q46.20 36.85 46.20 40.25Q46.20 43.00 47.33 44.75Q48.45 46.50 50.33 47.32Q52.20 48.15 54.50 48.15Q56.40 48.15 58.05 47.30Q59.70 46.45 60.15 44.15L57.70 44.15Q55.95 44.15 55.00 43.07Q54.05 42.00 54.05 40.30Q54.05 38.60 55.00 37.55Q55.95 36.50 57.70 36.50L63.70 36.50Q66.95 36.50 68.28 38.22Q69.60 39.95 69.60 43.35L69.60 52.70Q69.60 55.30 68.20 56.65Q66.80 58.00 64.50 58.00Q62.05 58.00 60.65 56.65Q59.25 55.30 59.25 52.70L59.25 49.60L58.35 49.60Q58.35 54.15 56.05 56.22Q53.75 58.30 49.90 58.30L49.45 58.30Z"
            />
          </svg>
        </div>
      </a>
    </button>

    <!-- Image URL Input Box -->
    <div class="image-url-container">
      <input type="text" 
             class="image-url-input" 
             placeholder="Paste an image URL and press Enter to paint it..."
             id="imageUrlInput">
    </div>

    <div class="cursor js-cursor"></div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Mouse tracking
        const mouse = {
          x: 0,
          y: 0,
          smoothX: 0,
          smoothY: 0,
          diff: 0,
          vx: 0,
          vy: 0,
        };

        // Viewport and frame dimensions
        const viewport = {
          width: window.innerWidth,
          height: window.innerHeight,
        };

        // Elements
        const cursor = document.querySelector(".js-cursor");
        const frame = document.querySelector(".frame");
        const svg = document.querySelector(".js-svg");
        const particlesWrapper = document.querySelector(
          ".js-particles-wrapper"
        );
        const burger = document.querySelector(".s__burger");
        const hero = document.querySelector(".s-hero");
        const scene = document.querySelector(".s-scene");
        const textOverlay = document.getElementById("textOverlay");

        // Track total particle area
        let totalParticleArea = 0;
        const revealThreshold = 50000;

        // Hover zones
        const zoneTopLeft = document.querySelector(".zone-top-left");
        const zoneTopRight = document.querySelector(".zone-top-right");
        const zoneCenter = document.querySelector(".zone-center");

        // Particles array
        const particles = [];
        let animationId;

        // If frame exists use it as initial center for mouse
        function getFrameRect() {
          return frame
            ? frame.getBoundingClientRect()
            : {
                left: 0,
                top: 0,
                width: viewport.width,
                height: viewport.height,
              };
        }

        const frameRectInit = getFrameRect();
        mouse.x = (frameRectInit.left || 0) + frameRectInit.width / 2;
        mouse.y = (frameRectInit.top || 0) + frameRectInit.height / 2;
        mouse.smoothX = mouse.x;
        mouse.smoothY = mouse.y;

        // Update cursor position
        function updateCursor() {
          if (cursor) {
            cursor.style.left = mouse.smoothX + "px";
            cursor.style.top = mouse.smoothY + "px";
          }
        }

        // Particle class (unchanged logic, coordinates are in SVG space)
        class Particle {
          constructor(x, y, size, particlesArray) {
            this.size = size;
            this.x = x;
            this.y = y;
            this.seed = Math.random() * 1000;
            this.freq = (0.5 + Math.random() * 1) * 0.01;
            this.amplitude = (1 - Math.random() * 2) * 0.5;
            this.color = "#fff";
            this.startTime = Date.now();
            this.lifeDuration = 6000;
            this.maxSize = size * 3;

            // Create SVG circle element
            this.el = document.createElementNS(
              "http://www.w3.org/2000/svg",
              "circle"
            );
            this.el.setAttribute("cx", this.x.toString());
            this.el.setAttribute("cy", this.y.toString());
            this.el.setAttribute("r", this.size.toString());
            this.el.setAttribute("fill", this.color);

            // Add to DOM
            particlesWrapper.appendChild(this.el);

            // Start animation
            this.animate();
          }

          animate() {
            const currentTime = Date.now();
            const elapsed = currentTime - this.startTime;

            if (elapsed > this.lifeDuration) {
              this.kill();
              return;
            }

            // Calculate current size
            if (elapsed < 2000) {
              const progress = elapsed / 2000;
              this.currentSize =
                this.size + (this.maxSize - this.size) * progress;
            } else if (elapsed < 6000) {
              const progress = (elapsed - 2000) / 4000;
              this.currentSize = this.maxSize * (1 - progress);
            }

            // Apply size
            this.el.setAttribute("r", this.currentSize.toString());

            // Add to total area
            totalParticleArea += Math.PI * Math.pow(this.currentSize, 2) * 0.1;

            // Show text overlay when enough area is revealed
            if (
              totalParticleArea > revealThreshold &&
              !textOverlay.classList.contains("visible")
            ) {
              textOverlay.classList.add("visible");
            }

            // Continue animation
            requestAnimationFrame(() => this.animate());
          }

          kill() {
            const index = particles.indexOf(this);
            if (index > -1) {
              particles.splice(index, 1);
            }
            if (this.el.parentNode) {
              this.el.remove();
            }
          }
        }

        // Mouse move handler
        function onMouseMove(e) {
          if (mouse.vx !== undefined && mouse.vy !== undefined) {
            mouse.vx += mouse.x - e.pageX;
            mouse.vy += mouse.y - e.pageY;
          }
          mouse.x = e.pageX;
          mouse.y = e.pageY;
        }

        // Window resize handler
        function onResize() {
          viewport.width = window.innerWidth;
          viewport.height = window.innerHeight;

          if (frame) {
            const rect = frame.getBoundingClientRect();
            if (svg) {
              svg.style.width = rect.width + "px";
              svg.style.height = rect.height + "px";
              // ensure svg element has explicit viewBox matching pixel coordinates (optional)
            }

            // Recenter mouse smooth if needed
            // ...existing code...
          }
        }

        // Emit particles (place them inside the frame's SVG coordinate system)
        function emitParticle() {
          if (!frame) return;

          const rect = frame.getBoundingClientRect();
          let x = 0;
          let y = 0;
          let size = 0;

          if (mouse.diff > 0.01) {
            // Convert page coords to frame-local SVG coords
            const localX = mouse.smoothX - rect.left;
            const localY = mouse.smoothY - rect.top;
            x = Math.max(0, Math.min(localX, rect.width));
            y = Math.max(0, Math.min(localY, rect.height));
            size = Math.min(mouse.diff * 0.5, 50);
          }

          if (size > 1) {
            const particle = new Particle(x, y, size, particles);
            particles.push(particle);
          }
        }

        // Main render loop
        function render() {
          // Smooth mouse movement
          mouse.smoothX += (mouse.x - mouse.smoothX) * 0.1;
          mouse.smoothY += (mouse.y - mouse.smoothY) * 0.1;
          mouse.diff = Math.hypot(
            mouse.x - mouse.smoothX,
            mouse.y - mouse.smoothY
          );

          // Emit particles based on mouse movement (inside frame)
          emitParticle();

          // Update cursor position
          updateCursor();

          // Continue animation
          animationId = requestAnimationFrame(render);
        }

        // Show/hide text elements based on hover zones
        function setupHoverZones() {
          // Top-left zone shows the hero text
          zoneTopLeft.addEventListener("mouseenter", function () {
            hero.classList.add("visible");
          });

          zoneTopLeft.addEventListener("mouseleave", function () {
            hero.classList.remove("visible");
          });

          // Top-right zone shows the burger menu
          zoneTopRight.addEventListener("mouseenter", function () {
            burger.classList.add("visible");
          });

          zoneTopRight.addEventListener("mouseleave", function () {
            burger.classList.remove("visible");
          });

          // Center zone shows the main scene text
          zoneCenter.addEventListener("mouseenter", function () {
            scene.classList.add("visible");
          });

          zoneCenter.addEventListener("mouseleave", function () {
            scene.classList.remove("visible");
          });
        }

        // Get references to the backgrounds
        const bwBackground = document.querySelector('.background-bw');
        const colorBackground = document.querySelector('.background-color');
        
        // Get reference to the image URL input
        const imageUrlInput = document.getElementById('imageUrlInput');

        // Handle image URL input
        imageUrlInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            const url = this.value.trim();
            if (url) {
              // Update both background images
              bwBackground.style.backgroundImage = `url('${url}')`;
              colorBackground.style.backgroundImage = `url('${url}')`;
              // Clear the input
              this.value = '';
            }
          }
        });

        // Event listeners
        window.addEventListener("mousemove", onMouseMove);
        window.addEventListener("resize", onResize);

        if (burger) {
          burger.addEventListener("mouseenter", function () {
            cursor.classList.add("hover");
          });
          burger.addEventListener("mouseleave", function () {
            cursor.classList.remove("hover");
          });
        }

        // Initialize
        onResize();
        updateCursor();
        setupHoverZones();
        render();
      });
    </script>
  </body>
</html>
