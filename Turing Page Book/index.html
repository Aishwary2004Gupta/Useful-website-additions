<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book turning page Animation</title>
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>

<body>
  <div class="imgLoader"></div>

  <div class="container">

    <h1 class="title">
      Realistic<br>Turning pages
    </h1>

    <div class="credit">
      <!-- * Images loaded randomly from Picsum.photos -->
    </div>

    <div class="book">
      <div class="gap"></div>
      <div class="pages">
        <div class="page"></div>
        <div class="page"></div>
        <div class="page"></div>
        <div class="page"></div>
        <div class="page"></div>
        <div class="page"></div>
      </div>
      <div class="flips">
        <div class="flip flip1">
          <div class="flip flip2">
            <div class="flip flip3">
              <div class="flip flip4">
                <div class="flip flip5">
                  <div class="flip flip6">
                    <div class="flip flip7"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Preload images and enable animations only when all images finished loading -->
  <script>
    (function(){
      const urls = [
        'https://picsum.photos/420/300?random=1',
        'https://picsum.photos/420/300?random=2',
        'https://picsum.photos/420/300?random=3',
        'https://picsum.photos/420/300?random=4',
        'https://picsum.photos/420/300?random=5'
      ];
      let loaded = 0;
      const finishOne = () => {
        loaded++;
        if (loaded === urls.length) {
          document.documentElement.classList.add('images-loaded');
        }
      };
      urls.forEach(u => {
        const img = new Image();
        img.onload = finishOne;
        img.onerror = finishOne; // don't block if one fails
        img.src = u;
      });
      // In case of very fast cache hits, ensure we still enable animations shortly after.
      setTimeout(() => {
        if (!document.documentElement.classList.contains('images-loaded')) {
          // if some images didn't call onload, still allow animations after 2s
          // (this avoids locking the page indefinitely)
          document.documentElement.classList.add('images-loaded');
        }
      }, 2000);
    })();
  </script>
</body>

</html>