<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Satisfying Cursor 2</title>
    
  </head>
  <body>
    <canvas id="canvas"></canvas>

    <!-- Auto Move Button -->
    <button id="autoMoveBtn">Stop Auto Move</button>

    <!-- Cursor Dot -->
    <div class="cursor-dot"></div>

    <button class="btn btn--tl">
      <a
        href="https://twitter.com/intent/follow?screen_name=aish2004gupta"
        target="_blank"
      >
        <div class="logo-svg-wrapper">
          <svg
            class="logo-svg"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0.5833333730697632 21 69.01666259765625 37.29999923706055"
            width="69.01666259765625"
            height="37.29999923706055"
          >
            <path
              class="logo-path"
              d="M5.35 58.00Q2 57.50 1 54.92Q0 52.35 1.40 48.40L8 29.65Q8.90 27.05 10.07 25.20Q11.25 23.35 13.03 22.35Q14.80 21.35 17.45 21.35Q21.45 21.35 23.48 23.55Q25.50 25.75 26.85 29.65L33.40 48.40Q34.80 52.35 33.93 54.92Q33.05 57.50 29.65 58.00Q26.90 58.35 24.88 57.35Q22.85 56.35 22.45 54.10Q22.15 52.60 22.38 51.60Q22.60 50.60 22.80 50.00Q22.95 49.50 22.82 49.02Q22.70 48.55 22.05 48.55L12.75 48.55Q12.10 48.55 11.97 49.02Q11.85 49.50 12.05 50.00Q12.25 50.60 12.45 51.60Q12.65 52.60 12.40 54.10Q12 56.35 10.05 57.35Q8.10 58.35 5.35 58.00M21.10 41.55L18.50 33.40Q18.40 32.90 18.18 32.62Q17.95 32.35 17.45 32.35Q16.95 32.35 16.73 32.62Q16.50 32.90 16.35 33.40L13.80 41.55L21.10 41.55ZM49.45 58.30Q45.45 58.30 42.50 55.97Q39.55 53.65 37.95 49.57Q36.35 45.50 36.35 40.35Q36.35 35.55 37.78 31.92Q39.20 28.30 41.68 25.87Q44.15 23.45 47.43 22.22Q50.70 21.00 54.35 21.00Q61.05 21.00 64.28 22.87Q67.50 24.75 67.50 27.70Q67.50 30.00 66.33 31.75Q65.15 33.50 62.80 33.50Q61.20 33.50 59.78 33.20Q58.35 32.90 56.88 32.62Q55.40 32.35 53.60 32.35Q49.65 32.35 47.93 34.60Q46.20 36.85 46.20 40.25Q46.20 43.00 47.33 44.75Q48.45 46.50 50.33 47.32Q52.20 48.15 54.50 48.15Q56.40 48.15 58.05 47.30Q59.70 46.45 60.15 44.15L57.70 44.15Q55.95 44.15 55.00 43.07Q54.05 42.00 54.05 40.30Q54.05 38.60 55.00 37.55Q55.95 36.50 57.70 36.50L63.70 36.50Q66.95 36.50 68.28 38.22Q69.60 39.95 69.60 43.35L69.60 52.70Q69.60 55.30 68.20 56.65Q66.80 58.00 64.50 58.00Q62.05 58.00 60.65 56.65Q59.25 55.30 59.25 52.70L59.25 49.60L58.35 49.60Q58.35 54.15 56.05 56.22Q53.75 58.30 49.90 58.30L49.45 58.30Z"
            />
          </svg>
        </div>
      </a>
    </button>

    <script>
      let canvas = document.getElementById("canvas");
      let ctx = canvas.getContext("2d");
      let cursorDot = document.querySelector(".cursor-dot");
      let autoMoveBtn = document.getElementById("autoMoveBtn");

      let pointer = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
      let mouseMoved = false;
      let autoMoveActive = true; // AUTO MOVE ENABLED BY DEFAULT

      const params = {
        pointsNumber: 30,
        spring: 0.25,
        friction: 0.5,
        widthFactor: 0.6,
      };

      // Initialize trail points
      const trail = new Array(params.pointsNumber).fill().map(() => ({
        x: pointer.x,
        y: pointer.y,
        dx: 0,
        dy: 0,
      }));

      // Update cursor position
      function updateCursorPosition(x, y) {
        cursorDot.style.left = x + "px";
        cursorDot.style.top = y + "px";
      }

      // Handle actual user movement
      function updateMousePosition(eX, eY) {
        pointer.x = eX;
        pointer.y = eY;
        updateCursorPosition(eX, eY);
      }

      // When user moves the mouse for the first time
      window.addEventListener("mousemove", (e) => {
        if (autoMoveActive) {
          stopAutoMove();
        }
        mouseMoved = true;
        updateMousePosition(e.pageX, e.pageY);
      });
      window.addEventListener("touchmove", (e) => {
        if (autoMoveActive) {
          stopAutoMove();
        }
        mouseMoved = true;
        updateMousePosition(e.targetTouches[0].pageX, e.targetTouches[0].pageY);
      });
      window.addEventListener("click", (e) => {
        updateMousePosition(e.pageX, e.pageY);
      });

      // Resize canvas
      function setupCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        // Reset cursor position
        updateCursorPosition(pointer.x, pointer.y);
      }
      window.addEventListener("resize", setupCanvas);
      setupCanvas();

      function startAutoMove() {
        autoMoveActive = true;
        mouseMoved = false;
        autoMoveBtn.classList.add("active");
        autoMoveBtn.textContent = "Stop Auto Move";
      }

      function stopAutoMove() {
        autoMoveActive = false;
        mouseMoved = true;
        autoMoveBtn.classList.remove("active");
        autoMoveBtn.textContent = "Start Auto Move";
      }

      function toggleAutoMove() {
        if (autoMoveActive) {
          stopAutoMove();
        } else {
          startAutoMove();
        }
      }

      autoMoveBtn.addEventListener("click", toggleAutoMove);

      // ---- RANDOM TRAIL MOTION ----
      function randomMotion(t) {
        if (!mouseMoved && autoMoveActive) {
          pointer.x =
            window.innerWidth / 2 +
            Math.sin(t * 0.001) * 200 +
            Math.cos(t * 0.003) * 100;
          pointer.y =
            window.innerHeight / 2 +
            Math.cos(t * 0.0015) * 150 +
            Math.sin(t * 0.0025) * 80;

          updateCursorPosition(pointer.x, pointer.y);
        }
      }

      // ---- ANIMATION LOOP ----
      function update(t) {
        randomMotion(t);

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        trail.forEach((p, i) => {
          const prev = i === 0 ? pointer : trail[i - 1];
          const spring = i === 0 ? 0.4 * params.spring : params.spring;
          p.dx += (prev.x - p.x) * spring;
          p.dy += (prev.y - p.y) * spring;
          p.dx *= params.friction;
          p.dy *= params.friction;
          p.x += p.dx;
          p.y += p.dy;
        });

        // Draw line
        ctx.lineCap = "round";
        ctx.beginPath();
        ctx.moveTo(trail[0].x, trail[0].y);

        for (let i = 1; i < trail.length - 1; i++) {
          const xc = 0.5 * (trail[i].x + trail[i + 1].x);
          const yc = 0.5 * (trail[i].y + trail[i + 1].y);
          ctx.quadraticCurveTo(trail[i].x, trail[i].y, xc, yc);
          ctx.lineWidth = params.widthFactor * (params.pointsNumber - i);
          ctx.strokeStyle = `hsla(${(t / 10 + i * 10) % 360}, 80%, 60%, 0.8)`;
          ctx.stroke();
        }

        ctx.lineTo(trail[trail.length - 1].x, trail[trail.length - 1].y);
        ctx.stroke();

        requestAnimationFrame(update);
      }

      window.addEventListener("load", function () {
        startAutoMove(); 
        update(0); 
      });
    </script>
  </body>
</html>
