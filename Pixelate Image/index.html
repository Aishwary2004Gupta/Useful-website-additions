<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pixel Art Generator</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
        color: white;
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        padding: 30px 0;
      }

      h1 {
        font-size: 3rem;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }

      .subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
        margin-bottom: 30px;
      }

      .app-container {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        background: rgba(0, 0, 0, 0.4);
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .upload-section {
        flex: 1;
        min-width: 300px;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .preview-section {
        flex: 1;
        min-width: 300px;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .section-title {
        font-size: 1.5rem;
        margin-bottom: 10px;
        border-bottom: 2px solid #fdbb2d;
        padding-bottom: 5px;
      }

      .upload-area {
        border: 3px dashed #fdbb2d;
        border-radius: 10px;
        padding: 40px 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        background: rgba(255, 255, 255, 0.1);
      }

      .upload-area:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateY(-5px);
      }

      .upload-icon {
        font-size: 3rem;
        margin-bottom: 15px;
        color: #fdbb2d;
      }

      .controls {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 20px;
      }

      .control-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      label {
        font-weight: 600;
      }

      input[type="range"] {
        width: 100%;
        height: 8px;
        border-radius: 5px;
        background: #ddd;
        outline: none;
      }

      .value-display {
        display: flex;
        justify-content: space-between;
      }

      .preview-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
      }

      .canvas-container {
        width: 100%;
        display: flex;
        justify-content: center;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        padding: 20px;
        min-height: 300px;
        align-items: center;
      }

      canvas {
        max-width: 100%;
        border-radius: 5px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
      }

      .button-group {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
      }

      button {
        padding: 12px 25px;
        border: none;
        border-radius: 50px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 1rem;
      }

      .primary-btn {
        background: #fdbb2d;
        color: #333;
      }

      .primary-btn:hover {
        background: #ffa500;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .secondary-btn {
        background: transparent;
        color: white;
        border: 2px solid #fdbb2d;
      }

      .secondary-btn:hover {
        background: rgba(253, 187, 45, 0.2);
        transform: translateY(-3px);
      }

      footer {
        text-align: center;
        margin-top: 40px;
        padding: 20px;
        opacity: 0.8;
      }

      .instructions {
        margin-top: 30px;
        background: rgba(0, 0, 0, 0.3);
        padding: 20px;
        border-radius: 10px;
      }

      .instructions h3 {
        margin-bottom: 15px;
        color: #fdbb2d;
      }

      .instructions ol {
        padding-left: 20px;
      }

      .instructions li {
        margin-bottom: 10px;
        line-height: 1.5;
      }

      @media (max-width: 768px) {
        .app-container {
          flex-direction: column;
        }

        h1 {
          font-size: 2.2rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Pixel Art Generator</h1>
        <p class="subtitle">
          Transform your images into retro pixel art masterpieces
        </p>
      </header>

      <div class="app-container">
        <div class="upload-section">
          <h2 class="section-title">Upload Image</h2>
          <div class="upload-area" id="uploadArea">
            <div class="upload-icon">üìÅ</div>
            <h3>Click to Upload Image</h3>
            <p>or drag and drop your image here</p>
            <input
              type="file"
              id="fileInput"
              accept="image/*"
              style="display: none"
            />
          </div>

          <div class="controls">
            <div class="control-group">
              <label for="pixelSize">Pixel Size</label>
              <input type="range" id="pixelSize" min="2" max="50" value="10" />
              <div class="value-display">
                <span>Small Pixels</span>
                <span id="pixelSizeValue">10</span>
                <span>Large Pixels</span>
              </div>
            </div>

            <div class="control-group">
              <label for="colorPalette">Color Palette</label>
              <input
                type="range"
                id="colorPalette"
                min="2"
                max="256"
                value="64"
              />
              <div class="value-display">
                <span>Limited Colors</span>
                <span id="colorPaletteValue">64</span>
                <span>Full Colors</span>
              </div>
            </div>

            <div class="control-group">
              <label for="brightness">Brightness</label>
              <input
                type="range"
                id="brightness"
                min="-100"
                max="100"
                value="0"
              />
              <div class="value-display">
                <span>Darker</span>
                <span id="brightnessValue">0</span>
                <span>Brighter</span>
              </div>
            </div>
          </div>

          <div class="button-group">
            <button class="primary-btn" id="generateBtn">
              Generate Pixel Art
            </button>
            <button class="secondary-btn" id="resetBtn">Reset</button>
          </div>
        </div>

        <div class="preview-section">
          <h2 class="section-title">Pixel Art Preview</h2>
          <div class="preview-container">
            <div class="canvas-container">
              <canvas id="originalCanvas"></canvas>
            </div>
            <div class="canvas-container">
              <canvas id="pixelCanvas"></canvas>
            </div>
            <div class="button-group">
              <button class="primary-btn" id="downloadBtn">
                Download Pixel Art
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="instructions">
        <h3>How to Use:</h3>
        <ol>
          <li>
            Upload an image by clicking the upload area or dragging and dropping
          </li>
          <li>
            Adjust the pixel size to control how pixelated your image becomes
          </li>
          <li>
            Use the color palette slider to limit the number of colors (for
            retro effect)
          </li>
          <li>Adjust brightness if needed</li>
          <li>Click "Generate Pixel Art" to see the result</li>
          <li>Download your pixel art when you're happy with the result</li>
        </ol>
      </div>

      <footer>
        <p>
          Pixel Art Generator &copy; 2023 | Create retro-style pixel art from
          your images
        </p>
      </footer>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // DOM Elements
        const uploadArea = document.getElementById("uploadArea");
        const fileInput = document.getElementById("fileInput");
        const originalCanvas = document.getElementById("originalCanvas");
        const pixelCanvas = document.getElementById("pixelCanvas");
        const generateBtn = document.getElementById("generateBtn");
        const resetBtn = document.getElementById("resetBtn");
        const downloadBtn = document.getElementById("downloadBtn");
        const pixelSize = document.getElementById("pixelSize");
        const colorPalette = document.getElementById("colorPalette");
        const brightness = document.getElementById("brightness");
        const pixelSizeValue = document.getElementById("pixelSizeValue");
        const colorPaletteValue = document.getElementById("colorPaletteValue");
        const brightnessValue = document.getElementById("brightnessValue");

        // Canvas contexts
        const originalCtx = originalCanvas.getContext("2d");
        const pixelCtx = pixelCanvas.getContext("2d");

        // Current image
        let currentImage = null;

        // Event Listeners
        uploadArea.addEventListener("click", () => fileInput.click());
        uploadArea.addEventListener("dragover", (e) => {
          e.preventDefault();
          uploadArea.style.background = "rgba(255, 255, 255, 0.2)";
        });
        uploadArea.addEventListener("dragleave", () => {
          uploadArea.style.background = "rgba(255, 255, 255, 0.1)";
        });
        uploadArea.addEventListener("drop", (e) => {
          e.preventDefault();
          uploadArea.style.background = "rgba(255, 255, 255, 0.1)";
          if (e.dataTransfer.files.length) {
            fileInput.files = e.dataTransfer.files;
            handleImageUpload();
          }
        });

        fileInput.addEventListener("change", handleImageUpload);
        generateBtn.addEventListener("click", generatePixelArt);
        resetBtn.addEventListener("click", resetControls);
        downloadBtn.addEventListener("click", downloadPixelArt);

        // Update value displays
        pixelSize.addEventListener("input", () => {
          pixelSizeValue.textContent = pixelSize.value;
        });

        colorPalette.addEventListener("input", () => {
          colorPaletteValue.textContent = colorPalette.value;
        });

        brightness.addEventListener("input", () => {
          brightnessValue.textContent = brightness.value;
        });

        // Handle image upload
        function handleImageUpload() {
          if (!fileInput.files.length) return;

          const file = fileInput.files[0];
          const reader = new FileReader();

          reader.onload = function (e) {
            const img = new Image();
            img.onload = function () {
              currentImage = img;
              displayOriginalImage(img);
              generatePixelArt();
            };
            img.src = e.target.result;
          };

          reader.readAsDataURL(file);
        }

        // Display original image
        function displayOriginalImage(img) {
          // Set canvas size to match image (with max constraints)
          const maxWidth = 400;
          const maxHeight = 300;

          let width = img.width;
          let height = img.height;

          if (width > maxWidth) {
            height = (maxWidth / width) * height;
            width = maxWidth;
          }

          if (height > maxHeight) {
            width = (maxHeight / height) * width;
            height = maxHeight;
          }

          originalCanvas.width = width;
          originalCanvas.height = height;
          pixelCanvas.width = width;
          pixelCanvas.height = height;

          originalCtx.drawImage(img, 0, 0, width, height);
        }

        // Generate pixel art
        function generatePixelArt() {
          if (!currentImage) return;

          const pixelSizeVal = parseInt(pixelSize.value);
          const colorCount = parseInt(colorPalette.value);
          const brightnessVal = parseInt(brightness.value);

          // Clear pixel canvas
          pixelCtx.clearRect(0, 0, pixelCanvas.width, pixelCanvas.height);

          // Get image data from original canvas
          const imageData = originalCtx.getImageData(
            0,
            0,
            originalCanvas.width,
            originalCanvas.height
          );
          const data = imageData.data;

          // Process image data to create pixel art
          for (let y = 0; y < originalCanvas.height; y += pixelSizeVal) {
            for (let x = 0; x < originalCanvas.width; x += pixelSizeVal) {
              // Get the color at this position
              const pixelIndex = (y * originalCanvas.width + x) * 4;
              let r = data[pixelIndex];
              let g = data[pixelIndex + 1];
              let b = data[pixelIndex + 2];

              // Apply brightness adjustment
              if (brightnessVal !== 0) {
                const factor = 1 + brightnessVal / 100;
                r = Math.min(255, Math.max(0, r * factor));
                g = Math.min(255, Math.max(0, g * factor));
                b = Math.min(255, Math.max(0, b * factor));
              }

              // Reduce color palette if needed
              if (colorCount < 256) {
                const factor = 255 / (colorCount - 1);
                r = Math.round(r / factor) * factor;
                g = Math.round(g / factor) * factor;
                b = Math.round(b / factor) * factor;
              }

              // Draw the pixel
              pixelCtx.fillStyle = `rgb(${r}, ${g}, ${b})`;
              pixelCtx.fillRect(x, y, pixelSizeVal, pixelSizeVal);
            }
          }
        }

        // Reset controls
        function resetControls() {
          pixelSize.value = 10;
          colorPalette.value = 64;
          brightness.value = 0;
          pixelSizeValue.textContent = "10";
          colorPaletteValue.textContent = "64";
          brightnessValue.textContent = "0";

          if (currentImage) {
            generatePixelArt();
          }
        }

        // Download pixel art
        function downloadPixelArt() {
          if (!currentImage) return;

          const link = document.createElement("a");
          link.download = "pixel-art.png";
          link.href = pixelCanvas.toDataURL("image/png");
          link.click();
        }
      });
    </script>
  </body>
</html>
