<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Image Comparison Slider + Panning</title>

<style>
    * {
        box-sizing: border-box;
    }

    body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        background: #111;
        font-family: sans-serif;
        color: white;
    }

    .input-container {
        margin-bottom: 20px;
        display: flex;
        gap: 10px;
    }

    input[type="text"] {
        width: 350px;
        padding: 8px;
        border-radius: 6px;
        border: none;
        outline: none;
        font-size: 14px;
    }

    button {
        padding: 8px 14px;
        border-radius: 6px;
        border: none;
        background: #007bff;
        color: white;
        font-weight: bold;
        cursor: pointer;
    }

    .comparison-container {
        position: relative;
        width: 80%;
        max-width: 900px;
        aspect-ratio: 16/9;
        overflow: hidden;
        border-radius: 12px;
        cursor: ew-resize;
        background: #000;
    }

    .comparison-container img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        pointer-events: none;
        user-select: none;
    }

    .comparison-img.left {
        clip-path: inset(0 0 0 50%);
        filter: grayscale(100%);
        transition: clip-path 0.05s linear;
    }

    .comparison-img.right {
        clip-path: inset(0 50% 0 0);
        transition: clip-path 0.05s linear;
    }

    .slider {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 2px;
        background: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(2px);
        transform: translateX(-50%);
        pointer-events: none;
    }

    .slider-handle {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: white;
    }

    /* Offset Controls UI */
    .controls {
        display: flex;
        gap: 15px;
        margin-top: 15px;
        align-items: center;
    }

    .controls label {
        font-size: 14px;
    }

    .controls input[type="range"] {
        width: 150px;
    }
</style>
</head>

<body>

    <div class="input-container">
        <input type="text" id="imgUrl" placeholder="Paste an image URL here" />
        <button id="loadBtn">Load Image</button>
    </div>

    <div class="comparison-container" id="comparison">
        <img id="leftImg"
            src="https://images.unsplash.com/photo-1511919884226-fd3cad34687c?q=80&w=1170&auto=format&fit=crop"
            alt="Left Image" class="comparison-img left" />
        <img id="rightImg"
            src="https://images.unsplash.com/photo-1511919884226-fd3cad34687c?q=80&w=1170&auto=format&fit=crop"
            alt="Right Image" class="comparison-img right" />
        <div class="slider" id="slider">
            <div class="slider-handle"></div>
        </div>
    </div>

    <div class="controls">
        <label>Horizontal Offset:
            <input type="range" id="offsetX" min="-500" max="500" value="0">
        </label>
        <label>Vertical Offset:
            <input type="range" id="offsetY" min="-500" max="500" value="0">
        </label>
        <button id="resetOffset">Reset</button>
    </div>


<script>
const container = document.getElementById("comparison");
const leftImg = document.getElementById("leftImg");
const rightImg = document.getElementById("rightImg");
const slider = document.getElementById("slider");
const loadBtn = document.getElementById("loadBtn");
const imgUrlInput = document.getElementById("imgUrl");

const offsetX = document.getElementById("offsetX");
const offsetY = document.getElementById("offsetY");
const resetOffset = document.getElementById("resetOffset");

let isDragging = false;
let isPanning = false;
let lastX = 0;
let lastY = 0;

// Pan offset
let posX = 0;
let posY = 0;

function updateOffsetUI() {
    leftImg.style.transform = `translate(${posX}px, ${posY}px)`;
    rightImg.style.transform = `translate(${posX}px, ${posY}px)`;
    offsetX.value = posX;
    offsetY.value = posY;
}

function updateSlider(x) {
    const rect = container.getBoundingClientRect();
    const pos = Math.min(Math.max(x - rect.left, 0), rect.width);
    const percent = (pos / rect.width) * 100;

    leftImg.style.clipPath = `inset(0 0 0 ${percent}%)`;
    rightImg.style.clipPath = `inset(0 ${100 - percent}% 0 0)`;
    slider.style.left = `${percent}%`;
}

// Drag slider & Pan Handling
container.addEventListener("mousedown", (e) => {
    if (e.button === 0) isDragging = true;
    else if (e.button === 2 || e.button === 1) {
        isPanning = true;
        lastX = e.clientX;
        lastY = e.clientY;
    }
});

container.addEventListener("mousemove", (e) => {
    if (isDragging) updateSlider(e.clientX);

    if (isPanning) {
        posX += e.clientX - lastX;
        posY += e.clientY - lastY;
        lastX = e.clientX;
        lastY = e.clientY;
        updateOffsetUI();
    }
});

container.addEventListener("mouseup", () => {
    isDragging = false;
    isPanning = false;
});
container.addEventListener("mouseleave", () => {
    isDragging = false;
    isPanning = false;
});

container.addEventListener("contextmenu", (e) => e.preventDefault());

// Scroll wheel pan: Shift = horizontal
container.addEventListener("wheel", (e) => {
    e.preventDefault();
    if (e.shiftKey) posX += e.deltaY * -0.3;
    else posY += e.deltaY * -0.3;
    updateOffsetUI();
});

// Touch support
container.addEventListener("touchstart", (e) => {
    if (e.touches.length === 1) {
        isDragging = true;
    } else {
        isPanning = true;
        lastX = e.touches[0].clientX;
        lastY = e.touches[0].clientY;
    }
}, { passive: false });

container.addEventListener("touchmove", (e) => {
    e.preventDefault();
    const t = e.touches[0];

    if (isDragging) updateSlider(t.clientX);
    if (isPanning) {
        posX += t.clientX - lastX;
        posY += t.clientY - lastY;
        lastX = t.clientX;
        lastY = t.clientY;
        updateOffsetUI();
    }
}, { passive: false });

container.addEventListener("touchend", () => {
    isDragging = false;
    isPanning = false;
});

// Manual sliders
offsetX.addEventListener("input", () => {
    posX = +offsetX.value;
    updateOffsetUI();
});
offsetY.addEventListener("input", () => {
    posY = +offsetY.value;
    updateOffsetUI();
});

// Reset
resetOffset.addEventListener("click", () => {
    posX = 0;
    posY = 0;
    updateOffsetUI();
});

// Default slider center
updateSlider(container.getBoundingClientRect().width / 2);

// Load custom URL
loadBtn.addEventListener("click", () => {
    const url = imgUrlInput.value.trim();
    if (!url) return;
    leftImg.src = url;
    rightImg.src = url;
});
</script>

</body>
</html>
