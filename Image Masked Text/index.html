<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Image Masked Text â€” cover / contain / percent</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;700;900&family=Montserrat:wght@400;700;900&family=Playfair+Display:wght@400;700;900&family=Poppins:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --img: url("https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600&auto=format&fit=crop");
        --bg-size: cover; /* cover | contain | <percent>% */
        --posX: 50%;
        --posY: 50%;
        --font: "Bebas Neue", system-ui, sans-serif;
        --weight: 900;
        --fallback: #111;
        --stroke-w: 0px;
        --stroke-c: rgba(0, 0, 0, 0);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100svh;
        background: radial-gradient(
            1200px 800px at 70% -20%,
            #1b1b1b 0,
            #0d0d0d 55%
          ),
          #0b0b0b;
        color: #dcdcdc;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial,
          sans-serif;
        display: grid;
        grid-template-rows: auto 1fr;
      }

      header {
        padding: 10px 14px;
        border-bottom: 1px solid #222;
        background: #0f0f10;
        display: flex;
        gap: 10px;
        align-items: center;
        justify-content: space-between;
      }

      header h1 {
        font-size: 16px;
        font-weight: 700;
        letter-spacing: 0.4px;
        margin: 0;
        color: #f1f1f1;
      }

      .container {
        display: grid;
        grid-template-columns: 360px 1fr;
        gap: 16px;
        padding: 16px;
      }

      @media (max-width: 920px) {
        .container {
          grid-template-columns: 1fr;
        }
      }

      /* Controls panel */
      .panel {
        background: #121214;
        border: 1px solid #1f1f22;
        border-radius: 14px;
        padding: 14px;
        display: grid;
        gap: 12px;
        align-content: start;
        position: sticky;
        top: 16px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
      }

      .panel h2 {
        margin: 4px 0 6px;
        font-size: 13px;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: #bdbdbd;
      }

      .row {
        display: grid;
        gap: 6px;
      }

      label {
        font-size: 12px;
        color: #a7a7a7;
      }

      input[type="text"],
      select,
      input[type="url"],
      input[type="number"] {
        width: 100%;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid #2a2a2f;
        background: #0e0e10;
        color: #e8e8e8;
        outline: none;
      }

      input[type="range"] {
        width: 100%;
      }

      .inline {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }

      .btns {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      button {
        padding: 9px 12px;
        border-radius: 10px;
        border: 1px solid #2a2a2f;
        background: #17171a;
        color: #f0f0f0;
        cursor: pointer;
      }

      button:hover {
        background: #1b1b1f;
      }

      .secondary {
        background: #0f0f12;
      }

      /* Stage */
      .stage {
        display: grid;
        place-items: center;
        padding: 16px;
        border: 1px dashed #242428;
        border-radius: 14px;
        min-height: 64svh;
        position: relative;
        overflow: hidden;
        background: radial-gradient(
            1600px 800px at 20% 120%,
            rgba(255, 255, 255, 0.03),
            transparent 60%
          ),
          linear-gradient(180deg, rgba(255, 255, 255, 0.02), transparent);
      }

      .masked-wrap {
        display: grid;
        gap: 16px;
        text-align: center;
        max-width: min(1100px, 95%);
      }

      .masked-text {
        font-family: var(--font);
        font-weight: var(--weight);
        font-size: clamp(2.2rem, 14vw, 12rem);
        line-height: 0.92;
        letter-spacing: 0.02em;
        margin: 0 auto;

        /* Image mask */
        background-image: var(--img);
        background-repeat: no-repeat;
        background-position: var(--posX) var(--posY);
        background-size: var(--bg-size);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        -webkit-text-fill-color: transparent;

        /* Outline */
        -webkit-text-stroke: var(--stroke-w) var(--stroke-c);
        text-shadow: 0 0 calc(var(--stroke-w)) var(--stroke-c);
        user-select: text;
      }

      /* Fallback solid color */
      .fallback .masked-text {
        background-image: none !important;
        color: var(--fallback);
        -webkit-text-fill-color: var(--fallback);
        -webkit-text-stroke: 0 transparent;
        text-shadow: none;
      }

      .hint {
        font-size: 12px;
        color: #9d9d9d;
        margin-top: -6px;
      }

      .kbd {
        border: 1px solid #2a2a2f;
        padding: 2px 6px;
        border-radius: 6px;
        background: #0b0b0e;
        font-size: 11px;
      }
    </style>
  </head>

  <body>
    <header>
      <h1>Image Masked Text</h1>
      <div class="btns">
        <button id="toggleFallback" class="secondary">Toggle Fallback</button>
        <button id="reset">Reset</button>
      </div>
    </header>

    <main class="container">
      <!-- Controls -->
      <section class="panel">
        <h2>Text</h2>
        <div class="row">
          <label for="text">Content</label>
          <input id="text" type="text" value="MASKED TEXT" />
          <div class="hint">Click the text to edit directly.</div>
        </div>

        <div class="inline">
          <div class="row">
            <label for="font">Font</label>
            <select id="font">
              <option value='"Bebas Neue", system-ui, sans-serif' selected>
                Bebas Neue
              </option>
              <option value='"Montserrat", system-ui, sans-serif'>
                Montserrat
              </option>
              <option value='"Playfair Display", serif'>Playfair Display</option>
              <option value='"Poppins", system-ui, sans-serif'>Poppins</option>
              <option value='Inter, system-ui, sans-serif'>Inter</option>
            </select>
          </div>

          <div class="row">
            <label for="weight">Weight <span id="weightVal" class="kbd">900</span></label>
            <input id="weight" type="range" min="100" max="900" step="100" value="900" />
          </div>
        </div>

        <h2>Image</h2>
        <div class="row">
          <label for="img">Image URL</label>
          <input
            id="img"
            type="url"
            value="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600&auto=format&fit=crop"
          />
        </div>
      </section>

      <!-- Stage -->
      <section class="stage" id="stage">
        <div class="masked-wrap" id="wrap">
          <div
            id="display"
            class="masked-text"
            contenteditable="true"
            spellcheck="false"
          >
            MASKED TEXT
          </div>
          <div class="hint">Double-click to edit, press Esc to exit edit mode.</div>
        </div>
      </section>
    </main>

    <script>
      const root = document.documentElement;
      const display = document.getElementById("display");
      const elText = document.getElementById("text");
      const elFont = document.getElementById("font");
      const elWeight = document.getElementById("weight");
      const weightVal = document.getElementById("weightVal");
      const elImg = document.getElementById("img");
      const wrap = document.getElementById("wrap");
      const btnFallback = document.getElementById("toggleFallback");
      const btnReset = document.getElementById("reset");

      // Set CSS variable
      const setVar = (n, v) => root.style.setProperty(n, v);

      // Bind events
      elText.addEventListener("input", () => {
        display.textContent = elText.value || " ";
      });

      display.addEventListener("input", () => {
        elText.value = display.textContent;
      });

      elFont.addEventListener("change", () => setVar("--font", elFont.value));

      elWeight.addEventListener("input", () => {
        weightVal.textContent = elWeight.value;
        setVar("--weight", elWeight.value);
      });

      elImg.addEventListener("change", () => {
        setVar("--img", `url("${elImg.value}")`);
      });

      btnFallback.addEventListener("click", () => {
        wrap.classList.toggle("fallback");
        btnFallback.textContent = wrap.classList.contains("fallback")
          ? "Use Image Mask"
          : "Toggle Fallback";
      });

      btnReset.addEventListener("click", () => {
        elText.value = "MASKED TEXT";
        display.textContent = "MASKED TEXT";
        elFont.value = '"Bebas Neue", system-ui, sans-serif';
        setVar("--font", elFont.value);
        elWeight.value = 900;
        setVar("--weight", 900);
        weightVal.textContent = "900";
        const defImg =
          "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600&auto=format&fit=crop";
        elImg.value = defImg;
        setVar("--img", `url("${defImg}")`);
        wrap.classList.remove("fallback");
      });
    </script>
  </body>
</html>
